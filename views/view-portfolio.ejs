<%- include("partials/_header") %>

    <br>

    <div class="container text-center">

        <h3><%= portfolio.title %> by <%= portfolio.author %></h3>
        <div class="row">
            <div class="col">
                <img id="headerImage" alt="Header Image" src="<%= portfolio.headerImage %>" width="750" height="500">
            </div>
        </div>

        <br>

        <div class="row">
            <div class="col">
              <div id="carousel" class="carousel slide">
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img src="<%= portfolio.contextImage %>" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                      <img src="<%= portfolio.contextImage2 %>" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                      <img src="<%= portfolio.contextImage3 %>" class="d-block w-100" alt="...">
                    </div>
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <a href="<%= portfolio.url%>">Live Portfolio</a>
            </div>

            <div class="card-body">
                <blockquote class="blockquote mb-0">
                    <p><%= portfolio.description %></p>
                    <footer class="blockquote-footer"><a href="/users/<%= portfolio.author %>" style=""><%= portfolio.author %></a></footer>
                </blockquote>
            </div>

            <ul class="list-group list-group-flush">
                <% portfolio.tags.forEach(function(tag) { %>
                    <li class="list-group-item"> - <%= tag %> - </li>
                <% }); %>
            </ul>

            <div class="card-body">
                <% if (currentUser) { %>
                    <a href="/portfolios/<%= portfolio.title %>/add_comment" class="btn btn-outline-primary">Add Comment</a>
                <% } %>
                <% if ((currentUser) && (currentUser.id === portfolio.authorId.toString())) { %>
                    <a href="/portfolios/<%= portfolio.title %>/edit" class="btn btn-outline-info">Edit Portfolio</a>
                <% }%>
            </div>
        </div>
        <br>
    </div>

    <div class="container-fluid">
        <% comments.forEach(function(entry) { %>
            <br>

            <div class="card">
                <div class="card-header">From <%= entry.author %></div>
                    <div class="card-body">
                        <blockquote class="blockquote mb-0">
                            <p><%= entry.comment %></p>
                            <% if ((currentUser) && (currentUser.id === entry.authorId.toString())) { %>
                                <form action="/portfolios/<%= portfolio.title %>/comment/<%= entry._id %>?_method=DELETE" method="POST">
                                    <button class="btn btn-outline-danger">Delete Comment</button>
                                </form>
                                <a href="/portfolios/<%= portfolio.title %>/edit_comment/<%= entry._id %>" class="btn btn-outline-info">Edit Comment</a>
                                <a href="/portfolios/<%= portfolio.title %>/view_comment/<%= entry._id %>" class="btn btn-outline-primary">View Comment</a>
                            <% } %>
                        </blockquote>
                    </div>
                <br>
            </div>
        <% }); %>
    </div>

    <br>

<%- include("partials/_footer") %>